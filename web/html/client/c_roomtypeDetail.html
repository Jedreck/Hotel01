<!DOCTYPE html>
<head>
    <!--load-->
    <script src="../../lib/easyCookie.js"></script>
    <script>
        var cookies_phone = cookie.get("phone");
        var status_val = cookie.get("status");
        if (cookies_phone == null || status_val == null || status_val === "0") {
            top.location.href = "/html/common/index.html";
        }
        var num = cookie.get("wantToSeeRoomtype");
        console.log(num);
        if (num == null) {
            top.location.href = "/html/client/c_bookRoom.html";
        }

    </script>
    <!--end load-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <title>预订详细</title>

    <!-- Favicons -->
    <link href="../../img/favicon.png" rel="icon">
    <link href="../../img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Bootstrap core CSS -->
    <link href="../../lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!--external css-->
    <link href="../../lib/font-awesome/css/font-awesome.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="../../css/zabuto_calendar.css">
    <link rel="stylesheet" type="text/css" href="../../lib/gritter/css/jquery.gritter.css"/>
    <!-- Custom styles for this template -->
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/style-responsive.css" rel="stylesheet">
    <script src="../../lib/chart-master/Chart.js"></script>
    <script src="../../lib/my_common.js"></script>
    <!--layUI-->
    <link rel="stylesheet" href="../../lib/layui/css/layui.css" media="all">

</head>

<body>
<section id="container">
    <!-- **********************************************************************************************************************************************************
        TOP BAR CONTENT & NOTIFICATIONS
        *********************************************************************************************************************************************************** -->
    <!--header start-->
    <header class="header black-bg">
        <div class="sidebar-toggle-box">
            <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
        </div>
        <!--logo start-->
        <a href="c_main.html" class="logo"><b>酒店<span>预订</span></b></a>
        <!--logo end-->
        <div class="nav notify-row" id="top_menu">
            <!--  notification start -->
            <ul class="nav top-menu">
                <!-- settings start -->
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                        <i class="fa fa-tasks"></i>
                        <div id="red_num">
                            <span class="badge bg-theme">0</span>
                        </div>
                    </a>
                    <ul class="dropdown-menu extended tasks-bar">
                        <div class="notify-arrow notify-arrow-green"></div>
                        <li>
                            <p class="green">你有待接收的预定</p>
                        </li>
                        <li class="external">
                            <a href="#">查看详情</a>
                        </li>
                    </ul>
                </li>
                <!-- settings end -->
            </ul>
        </div>
        <div class="top-menu">
            <ul class="nav pull-right top-menu">
                <li><a class="logout" onclick="logout()">登出</a></li>
            </ul>
        </div>
    </header>
    <!--header end-->
    <!-- **********************************************************************************************************************************************************
        MAIN SIDEBAR MENU
        *********************************************************************************************************************************************************** -->
    <!--sidebar start-->
    <aside>
        <div id="sidebar" class="nav-collapse ">
            <!-- sidebar menu start-->
            <ul class="sidebar-menu" id="nav-accordion">
                <p class="centered"><a href="c_profile.html"><img src="../../img/ui-sam.jpg" class="img-circle"
                                                                width="80"></a></p>
                <h5 id="phone" class="centered"></h5>

                <li class="mt">
                    <a class="" href="c_main.html">
                        <i class="glyphicon glyphicon-home"></i>
                        <span>首页</span>
                    </a>
                </li>

                <li class="sub-menu">
                    <a class="active" href="c_bookRoom.html">
                        <i class="glyphicon glyphicon-edit"></i>
                        <span>预订房间</span>
                    </a>
                </li>

                <li class="sub-menu">
                    <a href="javascript:;">
                        <i class="fa fa-cogs"></i>
                        <span>订单管理</span>
                    </a>
                    <ul class="sub">
                        <li><a href="/html/client/order_cancle.html">取消订单</a></li>
                        <li><a href="/html/client/order_management.html">历史记录</a></li>
                    </ul>
                </li>
            </ul>
            <!-- sidebar menu end-->
        </div>
    </aside>
    <!--sidebar end-->
    <!-- **********************************************************************************************************************************************************
        MAIN CONTENT
        *********************************************************************************************************************************************************** -->
    <!--main content start-->
    <section id="main-content">
        <section class="wrapper">
            <h3 style="margin-top: 10px"><i class="fa fa-angle-right"></i> 客房类型详细信息</h3>
            <div class="row mt">
                <!--  DATE PICKERS -->
                <div class="col-lg-12">
                    <div class="form-panel">
                        <form class="layui-form layui-form-pane" lay-filter="RoomInfo">
                            <div class="layui-form-item">
                                <label class="layui-form-label">客房类型</label>
                                <div class="layui-input-block">
                                    <input type="text" name="typename" lay-verify="required"
                                           autocomplete="off" class="layui-input" readonly>
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <label class="layui-form-label">床型</label>
                                <div class="layui-input-block">
                                    <input type="text" name="bedtype" autocomplete="off" class="layui-input"
                                           lay-verify="required" readonly>
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <label class="layui-form-label">价格</label>
                                <div class="layui-input-block">
                                    <input type="text" name="price" autocomplete="off" class="layui-input"
                                           placeholder="￥" lay-verify="required|number" readonly>
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <label class="layui-form-label">人数</label>
                                <div class="layui-input-block">
                                    <input type="text" name="people" autocomplete="off"
                                           class="layui-input" lay-verify="required|number" readonly>
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <label class="layui-form-label">建筑面积</label>
                                <div class="layui-input-block">
                                    <input type="text" name="area" autocomplete="off"
                                           class="layui-input" lay-verify="required|number" readonly>
                                </div>
                            </div>

                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">无限网络</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="wifi" value="有" title="有">
                                    <input type="radio" name="wifi" value="无" title="无">
                                </div>
                            </div>

                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">有线网络</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="wirednet" value="有" title="有">
                                    <input type="radio" name="wirednet" value="无" title="无">
                                </div>
                            </div>

                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">窗户</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="windows" value="有" title="有">
                                    <input type="radio" name="windows" value="无" title="无">
                                </div>
                            </div>

                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">浴室</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="bathroom" value="有" title="有">
                                    <input type="radio" name="bathroom" value="无" title="无">
                                </div>
                            </div>

                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">吸烟</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="smoke" value="允许" title="允许" readonly>
                                    <input type="radio" name="smoke" value="禁止" title="禁止" readonly>
                                </div>
                            </div>

                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">便利设施</label>
                                <div class="layui-input-block">
                                    <textarea class="layui-textarea" name="facility"
                                              lay-verify="required" readonly></textarea>
                                </div>
                            </div>

                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">其他</label>
                                <div class="layui-input-block">
                                    <textarea name="other" class="layui-textarea"
                                              lay-verify="required" readonly></textarea>
                                </div>
                            </div>
                            <!--<div class="layui-form-item">-->
                            <button class="layui-btn" type="button" onclick="back()">返回</button>
                            <br> <br>
                            <div class="layui-form-item">
                                <label class="layui-form-label">入住时间</label>
                                <div class="layui-input-block">
                                    <input type="text" name="inDate" autocomplete="off" class="layui-input"
                                           placeholder="" lay-verify="required|number" readonly>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">用户身份</label>
                                <div class="layui-input-block">
                                    <input type="text" name="phone" autocomplete="off" class="layui-input"
                                           placeholder="" lay-verify="required|number" readonly>
                                </div>
                            </div>

                            <button class="layui-btn layui-btn-danger" type="button" onclick="orderRoom()">预订</button>
                            <!--<button class="layui-btn layui-btn-danger" id="delete" type="button" >删除</button>-->
                            <!--</div>-->
                        </form>
                    </div>
                    <!-- /form-panel -->
                </div>
                <!-- /col-lg-12 -->
            </div>
        </section>
        <!-- /wrapper -->
    </section>
    <!--main content end-->

</section>
<!-- js placed at the end of the document so the pages load faster -->
<script src="../../lib/jquery/jquery.min.js"></script>

<script src="../../lib/bootstrap/js/bootstrap.min.js"></script>
<script class="include" type="text/javascript" src="../../lib/jquery.dcjqaccordion.2.7.js"></script>
<script src="../../lib/jquery.scrollTo.min.js"></script>
<script src="../../lib/jquery.nicescroll.js" type="text/javascript"></script>
<script src="../../lib/jquery.sparkline.js"></script>
<!--common script for all pages-->
<script src="../../lib/common-scripts.js"></script>
<script type="text/javascript" src="../../lib/gritter/js/jquery.gritter.js"></script>
<script type="text/javascript" src="../../lib/gritter-conf.js"></script>
<!--script for this page-->
<script src="../../lib/sparkline-chart.js"></script>
<script src="../../lib/zabuto_calendar.js"></script>

<script src="../../lib/layui/layui.js"></script>
<script>
    var jsons = JSON.parse(cookie.get("roomtypeJsons"));
    var roomtypeInfo = jsons[num];
    var inDate = cookie.get("orderDate");
    window.onload = function (ev) {
        console.log(roomtypeInfo);
        layui.use(['form', 'layedit', 'laydate'], function () {
            layui.form.val("RoomInfo", { //表单初始化
                "typename": roomtypeInfo.typename
                , "bedtype": roomtypeInfo.bedtype
                , "people": roomtypeInfo.people
                , "area": roomtypeInfo.area
                , "roomnum": roomtypeInfo.roomnum
                , "wifi": roomtypeInfo.wifi == 1 ? "有" : "无"
                , "wirednet": roomtypeInfo.wirednet == 1 ? "有" : "无"
                , "windows": roomtypeInfo.windows == 1 ? "有" : "无"
                , "smoke": roomtypeInfo.smoke == 1 ? "允许" : "禁止"
                , "bathroom": roomtypeInfo.bathroom == 1 ? "有" : "无"
                , "facility": roomtypeInfo.facility
                , "price": roomtypeInfo.price
                , "other": roomtypeInfo.other
                , "inDate": inDate
                , "phone": cookies_phone
            });
        });
        getUnreadNum();
    };
    function back() {
        top.location.href = "/html/client/c_bookRoom.html";
    }

    function orderRoom() {
        console.log("orderRoom!!!");
        var orderInfo = "";
        orderInfo += "{\"inDate\":\"" + inDate + "\",\"phone\":\""+cookies_phone+"\",\"roomtype\":\""+roomtypeInfo.R_roomtype+"\",\"price\":\""+roomtypeInfo.price+"\"}";
        console.log("orderinfo--"+orderInfo);
        $.ajax({
            url: "/bookRoomServlet",
            data: {jsondata: orderInfo},
            type: "post",
            success: function (flag) {
                console.log(flag);
                if (flag === "1") {
                    alert("预订成功。。。");
                    console.log("have info will fill !!");
                    top.location.href="/html/client/c_main.html"
                } else {
                    alert("预订失败。。。");
                    //json2Div(flag);
                }
            },
            error: function () {
                alert("网络错误。。。");
            }
        })
    }
</script>

</body>

</html>
